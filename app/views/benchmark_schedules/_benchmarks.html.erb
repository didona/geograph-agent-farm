<div class="span10  accordion" id="benchmark-accordion">
	<% @schedule.dynamic_profiles.each do |dynamic_profile| %>
		<div class="dynamic-profile-container" data-profile="<%= dynamic_profile.id %>">
			<label class="label label-info"><%= dynamic_profile.name.upcase %></label>
			<i class="dynamic-profile-action icon-trash" data-profile="<%= dynamic_profile.id %>"></i>
      
      <div class="progress progress-success progress-striped" style="width: 300px;">
        <% progress = @progress_data[:dynamic_profiles][dynamic_profile.id] %>
        <div id="dynamic-profile-progress-<%= dynamic_profile.id %>" class="bar" style="width: <%= progress %>%"><%= progress %>%</div>
      </div>

			<%= render :partial => 'shared/benchmark_profile_list', 
								 :locals => { :static_profiles => dynamic_profile.static_profiles, :accordion_id => "benchmark-accordion" } %>  
		</div>
	<% end %>
</div>

<script>
	$(document).ready(function() {
    $('#benchmark-accordion').sortable({
      stop: function() {
        var sortedProfiles = [];
        $('#benchmark-accordion').find('.dynamic-profile-container').each(function(index, elem) {
          sortedProfiles.push($(elem).data('profile'));
        });
        
        $.ajax({
          url: 'benchmark_schedules/sort',
          type: 'put',
          data: {ids: sortedProfiles}
        })
      }
    });
  });
</script>